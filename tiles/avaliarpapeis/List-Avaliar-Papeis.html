{{define "List-Avaliar-Papeis"}}
<!-- List Avaliar Papeis -->
<div id="main" class="w3-row-padding">
		<header class="w3-container w3-center w3-teal">
		    <div class="aria">
				<div style="margin-top: 6px;text-align: left;z-index:1">
		    		<a style="font-size:28px;cursor:pointer" onclick="navGadget()">
						&#9776; {{.AppName}}
		    		</a>
				</div>
				    <h3>{{.Title}}</h3>
				<div style="margin-top: 10px;">
                    <span style="position:absolute; top:34px; right:120px">{{.LoggedUser.User.Name}}</span>
					{{$allowed := (call .LoggedUser.HasPermission "avaliarPapeis")}}
				    <a style="margin-top: 6px" href="/logout">
						<span class="icon ion-log-out w3-xxlarge hoverbtn"></span>
					</a>
				</div>
		    </div>
		</header>
		<form action="/updateAvaliarPapeis" method="POST">
        <table class="w3-table w3-centered w3-border w3-bordered w3-hoverable" 
			style="border: 1px solid red">
            <tr>
                <th style="width:5%">Ord</th>
                <th style="text-align:left">Sumário</th>
                <th style="width:10%">Supervisor</th>
                <th style="width:10%">Auditor</th>
                <th style="width:5%">Tipo</th>
                <th style="width:10%">Peso</th>
                <th style="width:5%">Situação</th>
                <th style="width:10%">Nota</th>
				{{if $allowed}}
				<th style="width:20%">Ações</th>
				{{end}}
            </tr>
			{{$primeiraLinha := true}}
			{{$auxPilar := ""}}
			{{$auxComponente := ""}}
			{{$auxElemento := ""}}
			{{$auxItem := ""}}
            {{range $index, $produto := .Produtos}}
			{{if $primeiraLinha}}
            <tr style="background-color: aliceblue">
                <td>&nbsp;</td>
                <td style="text-align:left;padding-left: 5px">{{$produto.EntidadeNome}}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
				{{if $allowed}}
                <td>&nbsp;</td>
				{{end}}
            </tr>
            <tr style="background-color: white">
                <td>&nbsp;</td>
                <td style="text-align:left;padding-left: 10px">&nbsp;&nbsp;{{$produto.CicloNome}}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
		            </select>	
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="M">M</option>
						<option value="A">A</option>
						<option value="C">C</option>
		            </select>
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
		            </select>
				</td>
				{{if $allowed}}
                <td>
                    <button class="w3-btn w3-teal" onclick="">Detalhar</button>
                    <button class="w3-btn w3-black" onclick="">Histórico</button>
                </td>
				{{end}}
            </tr>
			{{$primeiraLinha = false}}
			{{end}}
			{{if ne $auxPilar $produto.PilarNome}}
			<tr style="background-color: #f6faff">
                <th style="width:5%">Ord</th>
                <th style="text-align:left">Sumário</th>
                <th style="width:10%">Supervisor</th>
                <th style="width:10%">Auditor</th>
                <th style="width:5%">Tipo</th>
                <th style="width:10%">Peso</th>
                <th style="width:5%">Situação</th>
                <th style="width:10%">Nota</th>
				{{if $allowed}}
				<th style="width:20%">Ações</th>
				{{end}}
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td style="text-align:left;padding-left: 20px">&nbsp;&nbsp;&nbsp;{{$produto.PilarNome}}</td>
				{{$auxPilar = $produto.PilarNome}}
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
		            </select>	
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="M">M</option>
						<option value="A">A</option>
						<option value="C">C</option>
		            </select>
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
		            </select>
				</td>
				{{if $allowed}}
                <td>
                    <button class="w3-btn w3-teal" onclick="">Detalhar</button>
                    <button class="w3-btn w3-brown" onclick="">Histórico</button>
                </td>
				{{end}}
            </tr>
			{{end}}
			{{if ne $auxComponente $produto.ComponenteNome}}
			<tr style="background-color: #f8fcff">
                <th style="width:5%">Ord</th>
                <th style="text-align:left">Sumário</th>
                <th style="width:10%">Supervisor</th>
                <th style="width:10%">Auditor</th>
                <th style="width:5%">Tipo</th>
                <th style="width:10%">Peso</th>
                <th style="width:5%">Situação</th>
                <th style="width:10%">Nota</th>
				{{if $allowed}}
				<th style="width:20%">Ações</th>
				{{end}}
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td style="text-align:left;padding-left: 20px">&nbsp;&nbsp;&nbsp;&nbsp;{{$produto.ComponenteNome}}</td>
				{{$auxComponente = $produto.ComponenteNome}}
				<td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);"
						{{if ne $.LoggedUser.User.Role 2}}readOnly disabled{{end}}
						name="SupervisorComponente{{$produto.ComponenteId}}">
						<option value=""></option>
						{{range $i, $supervisor := $.Supervisores }}
			                <option value="{{$supervisor.Id}}" {{if eq $produto.SupervisorId $supervisor.Id}}selected{{end}}>
								{{$supervisor.Name}}
							</option>
			            {{end}}
		            </select>
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);"
						{{if eq $.LoggedUser.User.Role 4}}readOnly disabled{{end}} 
						name="AuditorComponente{{$produto.ComponenteId}}">
						<option value=""></option>
						{{range $i, $auditor := $.Auditores }}
			                <option value="{{$auditor.Id}}" {{if eq $produto.AuditorId $auditor.Id}}selected{{end}}>
								{{$auditor.Name}}
							</option>
			            {{end}}
		            </select>
				</td>
				<td>&nbsp;</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
		            </select>	
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="M">M</option>
						<option value="A">A</option>
						<option value="C">C</option>
		            </select>
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
		            </select>
				</td>
				{{if $allowed}}
                <td>
                    <button class="w3-btn w3-teal" onclick="">Detalhar</button>
                    <button class="w3-btn w3-deep-green" onclick="">Histórico</button>
                </td>
				{{end}}					
        	</tr>
			{{end}}				
			{{if ne $auxElemento $produto.ElementoNome}}
            <tr>
                <td>&nbsp;</td>
                <td style="text-align:left;padding-left: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{$produto.ElementoNome}}</td>
				{{$auxElemento = $produto.ElementoNome}}
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
		            </select>	
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="M">M</option>
						<option value="A">A</option>
						<option value="C">C</option>
		            </select>
				</td>
                <td>
					<select class="w3-input" readOnly onchange="sinalizarAlteracao(this);">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
		            </select>
				</td>
				{{if $allowed}}
                <td>
                    <button class="w3-btn w3-teal" onclick="">Detalhar</button>
                    <button class="w3-btn w3-dark-green" onclick="">Histórico</button>
                </td>
				{{end}}
            </tr>
			{{end}}				
			<tr>
                <td>{{$produto.Order}}</td>
                <td style="text-align:left;padding-left: 30px">&nbsp;&nbsp;&nbsp;&nbsp;{{$produto.ItemNome}}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
				{{if $allowed}}
                <td>
                    <button class="w3-btn w3-teal" onclick="">Detalhar</button>
                    <button class="w3-btn w3-green" onclick="">Histórico</button>
                </td>
				{{end}}
            </tr>
       		{{end}}
			<tr>
				<td colspan="8" style="text-align: center">
					<button class="w3-btn w3-teal w3-margin-top w3-margin-bottom" type="submit">Salvar</button>
				</td>
			</tr>
        </table>
		</form>
    </div>
</div>
{{end}}